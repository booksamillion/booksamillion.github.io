
BAMM={snippetMap:{'cart':'/cart/display_div','wish-list':'/wishlist/wishlist_div'},_fetch:function(act){if(act.content&&this.snippetMap[act.content]){if(act.pre){act.pre();}var date=new Date();new Ajax.Request(this.snippetMap[act.content]+'?'+date.getTime(),{method:act.method?act.method:'get',parameters:act.parameters?act.parameters:'',onSuccess:act.bind?act.post.bind(act.bind):act.post});}},_nextSibling:function(elem){elem=elem.nextSibling;while(elem&&elem.nodeName.toLowerCase()=='#text'){elem=elem.nextSibling;}return elem;},_getStyle:function(oElm,strCssRule){var strValue="";if(document.defaultView&&document.defaultView.getComputedStyle){strValue=document.defaultView.getComputedStyle(oElm,"").getPropertyValue(strCssRule);}else if(oElm.currentStyle){while(-1!=(dashIndex=strCssRule.indexOf('-'))){strCssRule=strCssRule.substring(0,dashIndex)+strCssRule.substring(dashIndex+1,dashIndex+2).toUpperCase()+strCssRule.substring(dashIndex+2);}strValue=oElm.currentStyle[strCssRule];}return strValue.replace(/px$/,'');},_getWidthOffset:function(elem){return parseFloat(BAMM._getStyle(elem,'margin-left'))+parseFloat(BAMM._getStyle(elem,'margin-right'))+parseFloat(BAMM._getStyle(elem,'padding-left'))+parseFloat(BAMM._getStyle(elem,'padding-right'));},_getHeightOffset:function(elem){return parseFloat(BAMM._getStyle(elem,'padding-top'))+parseFloat(BAMM._getStyle(elem,'padding-bottom'));},_dirify:function(str){var separator='-';return str.replace(/&.*?;/,'').replace(/[^a-zA-Z0-9_-]+/,separator).replace('/(?:^-+|-+$)/',separator).toLowerCase();},greyInitialValues:function(){$$('input[type="text"], input[type="search"]').each(function(input){input.defaultValue=input.value;input.addClassName('grey');input.observe('focus',function(){if(this.value==this.defaultValue){this.value='';$(this).removeClassName('grey');}});input.observe('blur',function(e){if(this.value==''){this.value=this.defaultValue;this.addClassName('grey');}});});},refineSearch:function(){var refine=$('refine');if(refine){var toggle=new Element('a',{href:'#',className:'refine-toggle'});toggle.update('Narrow your search');toggle.observe('click',BAMM.toggleRefine.bind(BAMM));refine.insert({after:toggle});}},toggleRefine:function(event){var refine=$('refine');if(refine.getStyle('display')=='none'){refine.setStyle({display:'block'});$$('.refine-toggle').first().addClassName('refine-toggle-open');var refine_close=$$('.refine-close');if(refine_close==''){refine.getElementsBySelector('h4').first().insert({before:new Element('a',{href:'#',className:'refine-close'}).update('Hello, World!').observe('click',BAMM.toggleRefine.bind(BAMM))});}}else
{refine.setStyle({display:'none'});$$('.refine-toggle').first().removeClassName('refine-toggle-open');}event.stop();}};